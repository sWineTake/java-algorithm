DROP TABLE IF EXISTS order_items;
DROP TABLE IF EXISTS sales;
DROP TABLE IF EXISTS employees;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS customers;
DROP TABLE IF EXISTS departments;

-- 부서
CREATE TABLE departments (
    id INT PRIMARY KEY,
    dept_name VARCHAR(50),
    parent_dept_id INT
);

-- 직원 (계층 구조)
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    department_id INT,
    manager_id INT,
    salary INT,
    hire_date DATE,
    FOREIGN KEY (department_id) REFERENCES departments(id),
    FOREIGN KEY (manager_id) REFERENCES employees(id)
);

-- 고객
CREATE TABLE customers (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    grade VARCHAR(10),
    city VARCHAR(30),
    join_date DATE
);

-- 상품
CREATE TABLE products (
    id INT PRIMARY KEY,
    product_name VARCHAR(100),
    category VARCHAR(50),
    price INT
);

-- 매출 (일별)
CREATE TABLE sales (
    id INT PRIMARY KEY,
    product_id INT,
    sale_date DATE,
    quantity INT,
    amount INT,
    FOREIGN KEY (product_id) REFERENCES products(id)
);

-- 주문 상세
CREATE TABLE order_items (
    id INT PRIMARY KEY,
    customer_id INT,
    product_id INT,
    quantity INT,
    order_date DATE,
    FOREIGN KEY (customer_id) REFERENCES customers(id),
    FOREIGN KEY (product_id) REFERENCES products(id)
);

-- 샘플 데이터
INSERT INTO departments VALUES
(1, '경영지원본부', NULL),
(2, '영업본부', NULL),
(3, '개발본부', NULL),
(4, '인사팀', 1),
(5, '재무팀', 1),
(6, '영업1팀', 2),
(7, '영업2팀', 2),
(8, '백엔드팀', 3),
(9, '프론트팀', 3);

INSERT INTO employees VALUES
(1, 'CEO', NULL, NULL, 10000, '2015-01-01'),
(2, '경영지원본부장', 1, 1, 8000, '2016-01-01'),
(3, '영업본부장', 2, 1, 8500, '2016-06-01'),
(4, '개발본부장', 3, 1, 9000, '2015-03-01'),
(5, '인사팀장', 4, 2, 6000, '2017-01-01'),
(6, '재무팀장', 5, 2, 6500, '2017-06-01'),
(7, '영업1팀장', 6, 3, 7000, '2018-01-01'),
(8, '영업2팀장', 7, 3, 7200, '2018-03-01'),
(9, '백엔드팀장', 8, 4, 7500, '2016-09-01'),
(10, '프론트팀장', 9, 4, 7300, '2017-02-01'),
(11, '인사사원A', 4, 5, 4500, '2019-01-01'),
(12, '인사사원B', 4, 5, 4800, '2020-01-01'),
(13, '재무사원A', 5, 6, 5000, '2019-03-01'),
(14, '영업1사원A', 6, 7, 5500, '2020-06-01'),
(15, '영업1사원B', 6, 7, 5300, '2021-01-01'),
(16, '영업2사원A', 7, 8, 5600, '2020-09-01'),
(17, '영업2사원B', 7, 8, 5400, '2021-03-01'),
(18, '백엔드A', 8, 9, 6000, '2019-06-01'),
(19, '백엔드B', 8, 9, 6200, '2020-02-01'),
(20, '프론트A', 9, 10, 5800, '2020-08-01');

INSERT INTO customers VALUES
(1, '고객A', 'VIP', '서울', '2023-01-05'),
(2, '고객B', 'GOLD', '서울', '2023-01-10'),
(3, '고객C', 'SILVER', '부산', '2023-02-01'),
(4, '고객D', 'VIP', '서울', '2023-02-15'),
(5, '고객E', 'GOLD', '대전', '2023-03-01'),
(6, '고객F', 'SILVER', '서울', '2023-03-10'),
(7, '고객G', 'BRONZE', '광주', '2023-04-01'),
(8, '고객H', 'VIP', '부산', '2023-04-15'),
(9, '고객I', 'GOLD', '서울', '2023-05-01'),
(10, '고객J', 'SILVER', '대전', '2023-05-10'),
(11, '고객K', 'BRONZE', '서울', '2023-06-01'),
(12, '고객L', 'VIP', '서울', '2023-06-10'),
(13, '고객M', 'GOLD', '부산', '2023-07-01'),
(14, '고객N', 'SILVER', '서울', '2023-07-15'),
(15, '고객O', 'BRONZE', '광주', '2023-08-01');

INSERT INTO products VALUES
(1, '노트북A', '전자제품', 1200000),
(2, '노트북B', '전자제품', 1500000),
(3, '마우스', '전자제품', 30000),
(4, '키보드', '전자제품', 80000),
(5, '모니터', '전자제품', 350000),
(6, '의자A', '가구', 200000),
(7, '의자B', '가구', 300000),
(8, '책상A', '가구', 400000),
(9, '책상B', '가구', 500000),
(10, '헤드셋', '전자제품', 100000),
(11, '웹캠', '전자제품', 80000),
(12, '스탠드', '가구', 50000),
(13, 'USB', '전자제품', 15000),
(14, 'HDMI케이블', '전자제품', 20000),
(15, '파티션', '가구', 150000);

-- 매출 데이터 (2024년 1-3월)
INSERT INTO sales (id, product_id, sale_date, quantity, amount) VALUES
(1, 1, '2024-01-05', 5, 6000000),
(2, 3, '2024-01-05', 20, 600000),
(3, 2, '2024-01-10', 3, 4500000),
(4, 5, '2024-01-15', 8, 2800000),
(5, 1, '2024-01-20', 4, 4800000),
(6, 6, '2024-01-25', 10, 2000000),
(7, 10, '2024-01-28', 15, 1500000),
(8, 1, '2024-02-01', 6, 7200000),
(9, 2, '2024-02-05', 4, 6000000),
(10, 3, '2024-02-10', 25, 750000),
(11, 5, '2024-02-12', 10, 3500000),
(12, 7, '2024-02-15', 8, 2400000),
(13, 8, '2024-02-18', 6, 2400000),
(14, 11, '2024-02-20', 12, 960000),
(15, 1, '2024-02-25', 7, 8400000),
(16, 4, '2024-02-28', 15, 1200000),
(17, 1, '2024-03-01', 8, 9600000),
(18, 2, '2024-03-03', 5, 7500000),
(19, 5, '2024-03-05', 12, 4200000),
(20, 6, '2024-03-08', 15, 3000000),
(21, 7, '2024-03-10', 10, 3000000),
(22, 8, '2024-03-12', 8, 3200000),
(23, 9, '2024-03-15', 6, 3000000),
(24, 10, '2024-03-18', 20, 2000000),
(25, 1, '2024-03-20', 10, 12000000),
(26, 3, '2024-03-22', 30, 900000),
(27, 11, '2024-03-25', 15, 1200000),
(28, 12, '2024-03-28', 12, 600000);

-- 주문 데이터
INSERT INTO order_items (id, customer_id, product_id, quantity, order_date) VALUES
(1, 1, 1, 2, '2024-01-05'),
(2, 1, 3, 3, '2024-01-05'),
(3, 2, 2, 1, '2024-01-10'),
(4, 3, 5, 2, '2024-01-15'),
(5, 4, 1, 1, '2024-01-20'),
(6, 5, 6, 3, '2024-01-25'),
(7, 1, 10, 1, '2024-02-01'),
(8, 2, 5, 1, '2024-02-05'),
(9, 4, 2, 2, '2024-02-10'),
(10, 6, 7, 1, '2024-02-15'),
(11, 7, 8, 1, '2024-02-20'),
(12, 8, 1, 3, '2024-02-25'),
(13, 1, 4, 2, '2024-03-01'),
(14, 9, 5, 2, '2024-03-05'),
(15, 10, 6, 4, '2024-03-10'),
(16, 2, 1, 1, '2024-03-12'),
(17, 11, 3, 5, '2024-03-15'),
(18, 12, 2, 2, '2024-03-18'),
(19, 4, 7, 2, '2024-03-20'),
(20, 13, 8, 1, '2024-03-22');
